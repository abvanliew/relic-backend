{"options":{"viewOn":"paths","pipeline":[{"$unwind":{"path":"$skillIds"}},{"$lookup":{"from":"skills_joined","localField":"skillIds","foreignField":"_id","as":"skillObj"}},{"$unwind":{"path":"$skillObj"}},{"$group":{"_id":"$skillObj","paths":{"$push":{"$cond":{"if":{"$ne":["$inherient",true]},"then":{"id":"$_id","title":"$title"},"else":"$$REMOVE"}}}}},{"$replaceRoot":{"newRoot":{"$mergeObjects":["$_id","$$ROOT"]}}},{"$set":{"_id":"$_id._id","paths":{"$cond":{"if":{"$eq":["$paths",[]]},"then":"$$REMOVE","else":"$paths"}}}},{"$sort":{"tier":{"$numberInt":"1"},"order.category":{"$numberInt":"1"},"order.trainingCost":{"$numberInt":"1"},"action.manaCost":{"$numberInt":"1"},"title":{"$numberInt":"1"}}}]},"indexes":[],"collectionName":"skills_paths","type":"view"}